# 杭種コード自動追加アプリ

AI画像認識技術を使用して、測量写真の杭種を自動判定し、エクセルロジック準拠の杭種コードをファイル名に自動追加するアプリケーションです。

## 🎯 主な機能

- **AI自動判定**: 深層学習による高精度な杭種分類
- **エクセル完全準拠**: 既存のエクセルロジックと100%互換の杭種コード
- **バッチ処理**: フォルダ内の全画像を一括処理
- **安全性**: 処理前の自動バックアップ機能
- **ユーザーフレンドリー**: 直感的なGUIインターフェース

## 📋 対応杭種・コード

| 杭種 | コード | 説明 |
|------|-------|------|
| プラスチック杭 | P | Plastic |
| プレート | PL | Plate |
| 金属鋲 | B | Byou |
| コンクリート杭 | C | Concrete |
| 引照点 | T | Target point |
| 国土基準点 | KD | Kokudo |
| 都市再生街区基準点 | GK | Gaiku Kijun |
| 都市再生街区多角点 | GT | Gaiku Takaku |
| 都市再生街区補助点 | GH | Gaiku Hojo |
| 都市再生街区節点 | GS | Gaiku Setsu |

## 🚀 セットアップ

### 1. 必要要件
- Python 3.8以上
- Windows 10/11

### 2. 依存関係インストール
```bash
pip install -r requirements.txt
```

### 3. アプリケーション起動
```bash
python pile_classifier_app.py
```

## 📚 使用方法

### 基本的な使い方
1. アプリケーションを起動
2. 「フォルダ選択」で処理対象フォルダを選択
3. 必要に応じて処理オプションを設定
4. 「処理実行」ボタンをクリック

### 処理フロー例
```
入力: A01-1.jpg
↓ [AI画像認識]
判定: プラスチック杭
↓ [コード付与]
出力: PA01-1.jpg
```

## 🧠 AIモデルの訓練

### 1. 訓練データ準備
```bash
python train_model.py --create_structure
```

### 2. 画像データ配置
作成された `training_data` フォルダに各杭種の画像を配置：
```
training_data/
├── plastic/      # プラスチック杭の画像
├── plate/        # プレートの画像
├── metal/        # 金属杭の画像
├── concrete/     # コンクリート杭の画像
├── target/       # 引照点の画像
├── kokudo/       # 国土基準点の画像
├── gaiku_kijun/  # 都市再生街区基準点の画像
├── gaiku_takaku/ # 都市再生街区多角点の画像
├── gaiku_hojo/   # 都市再生街区補助点の画像
└── gaiku_setsu/  # 都市再生街区節点の画像
```

### 3. モデル訓練実行
```bash
python train_model.py --data_dir training_data --model_path models/pile_classifier.h5
```

## ⚙️ 設定

`config.json` ファイルで各種設定を調整可能：

- **信頼度閾値**: AI判定の最低信頼度
- **対応拡張子**: 処理対象ファイル形式
- **バックアップ設定**: 自動バックアップの有効/無効
- **UI設定**: ウィンドウサイズ、テーマ等

## 📁 プロジェクト構造

```
AI/
├── pile_classifier_app.py  # メインアプリケーション
├── train_model.py          # モデル訓練スクリプト
├── config.json             # 設定ファイル
├── requirements.txt        # 依存関係
├── models/                 # 訓練済みモデル
│   ├── pile_classifier.h5
│   └── model_info.json
├── training_data/          # 訓練データ
│   ├── plastic/
│   ├── plate/
│   └── ...
└── README.md              # このファイル
```

## 🔧 トラブルシューティング

### よくある問題

**Q: "モジュールが見つかりません"エラー**
A: `pip install -r requirements.txt` で依存関係をインストールしてください

**Q: AI判定精度が低い**
A: より多くの訓練データでモデルを再訓練してください

**Q: 処理が遅い**
A: CPU版の代わりにGPU版TensorFlowの使用を検討してください

### ログファイル
アプリケーション実行時のログは画面に表示され、問題の診断に使用できます。

## 📈 パフォーマンス

- **処理速度**: 画像1枚あたり約1-3秒（CPU環境）
- **精度**: 適切な訓練データで90%以上の分類精度
- **対応ファイル**: JPEG、PNG、BMP、TIFF形式

## 🔄 アップデート履歴

### v1.0.0 (2024-07-16)
- 初回リリース
- 基本的な杭種分類機能
- GUIアプリケーション
- バックアップ機能

## 📞 サポート

技術的な問題やご要望がございましたら、以下までお問い合わせください：

- プロジェクト課題: GitHubのIssueページ
- 機能要望: GitHubのFeature Requestページ

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

**注意**: このアプリケーションはAI技術を使用しており、100%の精度は保証されません。重要な作業では必ず結果を目視確認してください。
